<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VideoChat</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/611f1eef1a.js" crossorigin="anonymous"></script>
    <script src="/__/firebase/7.13.1/firebase-app.js"></script>

    <script src="/__/firebase/7.13.1/firebase-firestore.js"></script>

    <script src="/__/firebase/init.js"></script>
</head>

<body>
    <div class="modal" id="beforeJoinModal" aria-hidden="true" aria-labelledby="beforeJoinModalLabel" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-fullscreen">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="beforeJoinModalLabel">VideoChat</h5>
                </div>
                <div class="modal-body bg-dark  d-flex justify-content-center">
                    <video id="previewVideo" muted autoplay playsinline></video>
                </div>
                <div class="modal-footer">
                    <input type="checkbox" class="btn-check" id="btn-check-mic-outlined" autocomplete="off">
                    <label onclick="stopAudio()" class="btn btn-outline-danger" for="btn-check-mic-outlined"><i class="fa fa-microphone fa-3x"></i></label><br>
                    <input type="checkbox" class="btn-check" id="btn-check-video-outlined" autocomplete="off">
                    <label onclick="stopVideo()" class="btn btn-outline-danger" for="btn-check-video-outlined"><i class="fas fa-video fa-3x"></i></label><br>

                    <button class="btn btn-primary fa-2x" data-bs-target="#joinModal" data-bs-toggle="modal" data-bs-dismiss="modal">Join</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="joinModal" aria-hidden="true" aria-labelledby="joinModalLabel" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-fullscreen">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="joinModalLabel">VideoChat</h5>
                </div>
                <div class="modal-body bg-dark d-flex justify-content-center">
                    <video id="localVideo" muted autoplay playsinline></video>
                    <video id="remoteVideo" autoplay playsinline></video>
                </div>
                <div class="modal-footer">
                    <input type="checkbox" class="btn-check" id="btn-check-3-outlined" autocomplete="off">
                    <label onclick="stopAudio()" class="btn btn-outline-danger" for="btn-check-3-outlined"><i class="fa fa-microphone fa-3x"></i></label><br>
                    <input type="checkbox" class="btn-check" id="btn-check-4-outlined" autocomplete="off">
                    <label onclick="stopVideo()" class="btn btn-outline-danger" for="btn-check-4-outlined"><i class="fas fa-video fa-3x"></i></label><br>
                    <button id="hangupBtn" class="btn btn-outline-danger" data-bs-target="#beforeJoinModal" data-bs-toggle="modal" data-bs-dismiss="modal"><i class="px-3 fa fa-phone-slash fa-3x"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- original modal  -->
    <div class="container-fluid bg-dark">
        <div class="row">
            <div class="col position-relative">
                <div class="row vh-100 p-5">
                    <div class="col-12 d-flex flex-row align-items-center video-grid g-0 gy-0">
                        <video id="localVideo" class="m-3 rounded" muted autoplay playsinline></video>
                        <video id="remoteVideo" class="rounded m-3" autoplay playsinline></video>
                    </div>
                </div>
                <div class="row position-absolute bottom-0">
                    <div class="col-12">
                        <ul class="nav justify-content-center py-4 text-white">
                            <li class="nav-item" id="micBtn"><i class="px-3 fa fa-microphone fa-3x" aria-hidden="true"></i></li>
                            <li class="nav-item" id="cameraBtn"><i class="px-3 fas fa-video fa-3x"></i></li>
                            <li class="nav-item" id="hangupBtn"><i class="px-3 fa fa-phone-slash fa-3x"></i></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col d-none"></div>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="joinModal" tabindex="-1" aria-labelledby="joinModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-fullscreen">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="joinModalLabel">VideoChat</h5>
                    </div>
                    <div class="modal-body">
                        <video id="previewVideo" autoplay playsinline></video>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Join</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script src="chatApp.js"></script>
    <script src="script.js"></script>

</body>

</html>